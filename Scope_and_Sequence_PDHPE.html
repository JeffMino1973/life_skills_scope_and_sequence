<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSW PDHPE Life Skills Scope and Sequence</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7fafc;
        }
        .table-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        .table-cell {
            padding: 1rem;
            min-height: 80px;
            border-bottom: 1px solid #e2e8f0;
            cursor: pointer;
            transition: background-color 0.2s, color 0.2s;
            display: flex;
            align-items: flex-start;
            justify-content: flex-start;
            text-align: left;
        }
        .table-cell:hover {
            background-color: #CBDEFD;
            color: #000000;
        }
        .table-cell:hover .unit-title, .table-cell:hover .unit-description {
            color: #000000;
        }
        .table-cell:hover .unit-outcomes {
            color: #002664;
        }
        .rotated-text {
            writing-mode: vertical-lr;
            text-orientation: mixed;
            transform: rotate(180deg);
            white-space: nowrap;
        }
        /* Custom styles for the dropdown to match the overall aesthetic */
        .select-container {
            padding: 1rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .select-button, .print-button {
            background-color: #146CFD;
            color: white;
            padding: 12px 24px;
            border-radius: 9999px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            margin: 0 8px;
            border: none;
        }
        .select-button.active {
            background-color: #002664;
            box-shadow: inset 0 2px 4px 0 rgb(0 0 0 / 0.05);
        }
        @media print {
            body {
                background-color: #ffffff;
            }
            .select-container, .print-button, #unit-details, .p-4.text-sm.font-semibold, .rotated-text {
                display: none;
            }
            .table-container {
                padding: 0;
                box-shadow: none;
            }
            .table-cell {
                border-bottom: 1px solid #000;
                padding: 0.5rem;
                min-height: auto;
                cursor: default;
            }
            .unit-title {
                font-size: 1.1rem;
            }
            .unit-outcomes {
                font-size: 0.7rem;
            }
            .unit-description {
                font-size: 0.8rem;
            }
            #schedule-header {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body class="bg-gray-100 p-4 sm:p-8">

    <div class="text-center text-3xl sm:text-4xl font-extrabold text-[#002664] mt-8 mb-4">NSW PDHPE Life Skills Scope and Sequence</div>
    <div class="select-container">
        <div class="flex flex-wrap justify-center space-x-2 sm:space-x-4">
            <button class="select-button active" data-stage="4">Stage 4</button>
            <button class="select-button" data-stage="5">Stage 5</button>
            <button class="select-button" data-stage="6">Stage 6</button>
            <button class="print-button hidden" id="print-button">Print PDF</button>
        </div>
    </div>

    <div class="table-container bg-white rounded-xl shadow-lg overflow-hidden mt-8">
        <div class="p-4 text-sm font-semibold text-gray-600">
            *Click on the unit name to access available resources
        </div>
        <div id="schedule-header" class="grid grid-cols-11 text-center text-sm font-medium bg-[#002664] text-white border-b-2 border-white">
            <!-- Header Row -->
            <div class="col-span-1 border-r border-white"></div>
            <div class="col-span-1 py-4">Week 1</div>
            <div class="col-span-1 py-4">Week 2</div>
            <div class="col-span-1 py-4">Week 3</div>
            <div class="col-span-1 py-4">Week 4</div>
            <div class="col-span-1 py-4">Week 5</div>
            <div class="col-span-1 py-4">Week 6</div>
            <div class="col-span-1 py-4">Week 7</div>
            <div class="col-span-1 py-4">Week 8</div>
            <div class="col-span-2 py-4 border-l border-white">Weeks 9 & 10</div>
        </div>

        <!-- Table Body Rows will be dynamically injected here -->
        <div id="schedule-body" class="text-sm"></div>
    </div>

    <!-- New section that opens on click -->
    
    <!-- New standardized Unit Details panel -->
    <div id="unit-details" class="table-container bg-white rounded-xl shadow-lg mt-8 p-8 transition-all duration-300 ease-in-out hidden">
        <h2 id="unit-title" class="text-2xl font-bold text-[#146CFD] mb-2"></h2>
        <p id="unit-subtitle" class="text-lg text-[#146CFD] mb-4"></p>
        <p class="text-sm text-gray-500 mb-6">Lesson resources will be released by Term 1, 2026</p>

        <!--  Section -->
        <div class="border-t border-b border-gray-200 py-4">
            <div id="outcomes-header" class="flex justify-between items-center cursor-pointer">
                <h3 class="text-lg font-semibold text-[#146CFD]"></h3>
                <svg id="outcomes-arrow" class="w-6 h-6 text-gray-500 transform transition-transform duration-300 rotate-90" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"></path>
                </svg>
            </div>
            <div id="outcomes-content" class="mt-4 hidden"></div>
        </div>

        <!-- Resources Section -->
        <div class="border-b border-gray-200 py-4 mt-4">
            <div id="resources-header" class="flex justify-between items-center cursor-pointer">
                <h3 class="text-lg font-semibold text-[#146CFD]">Resources</h3>
                <svg id="resources-arrow" class="w-6 h-6 text-gray-500 transform transition-transform duration-300 rotate-90" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"></path>
                </svg>
            </div>
            <div id="resources-content" class="mt-4 hidden">
                <button id="add-resource" class="bg-[#146CFD] text-white px-4 py-2 rounded-lg font-medium hover:bg-[#002664]">+ Add Resource</button>
                <input type="file" id="resource-file" class="hidden" />
                <ul id="resource-list" class="mt-4 space-y-2 text-sm text-gray-700"></ul>
            </div>
        </div>
    </div>

            <div id="outcomes-content" class="mt-4 hidden"></div>
        </div>
        
        <!-- Lesson Resources Section -->
        <div class="border-t border-b border-gray-200 py-4">
            <div id="lesson-header" class="flex justify-between items-center cursor-pointer">
                <h3 class="text-lg font-semibold text-[#146CFD]"></h3>
                <svg id="lesson-arrow" class="w-6 h-6 text-gray-500 transform transition-transform duration-300 rotate-90" fill="currentColor" viewBox="0 0 20 20"><path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
            </div>
            <div id="lesson-content" class="mt-4 hidden"></div>
        </div>

        <!-- Curriculum Resources Section -->
        <div class="border-b border-gray-200 py-4">
            <div id="curriculum-header" class="flex justify-between items-center cursor-pointer">
                <h3 class="text-lg font-semibold text-[#146CFD]"></h3>
                <svg id="curriculum-arrow" class="w-6 h-6 text-gray-500 transform transition-transform duration-300 rotate-90" fill="currentColor" viewBox="0 0 20 20"><path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
            </div>
            <div id="curriculum-content" class="mt-4 hidden"></div>
        </div>

        <!-- Support Resources Section -->
        <div class="border-b border-gray-200 py-4">
            <div id="support-header" class="flex justify-between items-center cursor-pointer">
                <h3 class="text-lg font-semibold text-[#146CFD]"></h3>
                <svg id="support-arrow" class="w-6 h-6 text-gray-500 transform transition-transform duration-300 rotate-90" fill="currentColor" viewBox="0 0 20 20"><path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
            </div>
            <div id="support-content" class="mt-4 hidden"></div>
        </div>
    </div>

    <script>
        const scheduleBody = document.getElementById('schedule-body');
        const unitDetails = document.getElementById('unit-details');
        const unitTitle = document.getElementById('unit-title');
        const unitSubtitle = document.getElementById('unit-subtitle');
        const outcomesContent = document.getElementById('outcomes-content');
        const lessonContent = document.getElementById('lesson-content');
        const curriculumContent = document.getElementById('curriculum-content');
        const supportContent = document.getElementById('support-content');
        const stageButtons = document.querySelectorAll('.select-button');
        const printButton = document.getElementById('print-button');

        // Central data object for the PDHPE Life Skills scope and sequence
        const scopeAndSequenceData = {
            '4': {
                title: 'NSW Stage 4 PDHPE Life Skills',
                terms: [
                    [{ name: 'Being Resilient', weeks: 5 }, { name: 'Child Protection', weeks: 5 }],
                    [{ name: 'Keeping Myself Safe', weeks: 5 }, { name: 'How can I solve problems while moving?', weeks: 5 }],
                    [{ name: 'Mindfulness & Wellbeing', weeks: 10 }],
                    [{ name: 'Healthy Choices', weeks: 10 }]
                ]
            },
            '5': {
                title: 'NSW Stage 5 PDHPE Life Skills',
                terms: [
                    [{ name: 'This Is Me', weeks: 10 }],
                    [{ name: 'Being Party Safe', weeks: 5 }, { name: 'Being Work Ready', weeks: 5 }],
                    [{ name: 'Community Health', weeks: 10 }],
                    [{ name: 'Physical Fitness', weeks: 10 }]
                ]
            },
            '6': {
                title: 'NSW Stage 6 PDHPE Life Skills',
                terms: [
                    [{ name: 'Relationships & Communication', weeks: 10 }],
                    [{ name: 'Safe & Respectful Relationships', weeks: 10 }],
                    [{ name: 'Road & Water Safety', weeks: 10 }],
                    [{ name: 'Personal Identity & Growth', weeks: 10 }]
                ]
            }
        };

        const unitDetailsData = {
            'default': {
                subtitle: 'Select a unit to view details',
                outcomes: [],
                description: '',
                lesson: [],
                curriculum: [],
                support: []
            },
            'Being Resilient': {
                subtitle: 'Stage 4 | Term 1',
                outcomes: ['PDLS-5', 'PDLS-1', 'PDLS-3', 'PDLS-4'],
                description: 'This unit focuses on empowering students to develop resilience that can support them to respond positively to different situations.',
                lesson: ['Lesson 1: What is resilience?', 'Lesson 2: Bouncing back from challenges'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 4 PDHPE Life Skills - Introduction to the resources']
            },
            'Child Protection': {
                subtitle: 'Stage 4 | Term 1',
                outcomes: ['PDLS-1', 'PDLS-2', 'PDLS-4', 'PDLS-8', 'PDLS-9', 'PDLS-10'],
                description: 'Students will describe their unique qualities and strengths and how these can be used to help themselves and others stay safe. They will understand that everyone has the right to be safe and to tell others not to touch their body when they do not want to be touched.',
                lesson: ['Lesson 1: My body belongs to me', 'Lesson 2: Identifying safe and unsafe situations'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 4 PDHPE Life Skills - Introduction to the resources']
            },
            'Keeping Myself Safe': {
                subtitle: 'Stage 4 | Term 2',
                outcomes: ['PDLS-1', 'PDLS-2', 'PDLS-4', 'PDLS-8', 'PDLS-9', 'PDLS-10'],
                description: 'Students will identify different parts of the body, including those which are private. Students will understand that everyone has a right to be safe and that their body is their own.',
                lesson: ['Lesson 1: Private parts', 'Lesson 2: Saying yes or no to touch'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 4 PDHPE Life Skills - Introduction to the resources']
            },
            'How can I solve problems while moving?': {
                subtitle: 'Stage 4 | Term 2',
                outcomes: ['PDLS-5', 'PDLS-6', 'PDLS-10'],
                description: 'Students will test and create solutions to a variety of target games through modifying movement sequences and tactical approaches.',
                lesson: ['Lesson 1: Target games and tactics', 'Lesson 2: Propelling objects at targets'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 4 PDHPE Life Skills - Introduction to the resources']
            },
            'Mindfulness & Wellbeing': {
                subtitle: 'Stage 4 | Term 3',
                outcomes: ['PDLS-1', 'PDLS-2', 'PDLS-3', 'PDLS-4'],
                description: 'Students explore strategies for managing emotions, stress, and anxiety. This unit focuses on self-care and developing positive coping mechanisms.',
                lesson: ['Lesson 1: My emotions', 'Lesson 2: Simple mindfulness techniques'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 4 PDHPE Life Skills - Introduction to the resources']
            },
            'Healthy Choices': {
                subtitle: 'Stage 4 | Term 4',
                outcomes: ['PDLS-7', 'PDLS-8', 'PDLS-9'],
                description: 'Students investigate the importance of nutrition, hygiene, and physical activity in maintaining a healthy lifestyle. They learn to make informed decisions about their own health.',
                lesson: ['Lesson 1: Healthy food choices', 'Lesson 2: Getting active'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 4 PDHPE Life Skills - Introduction to the resources']
            },
            'This Is Me': {
                subtitle: 'Stage 5 | Term 1',
                outcomes: ['PDLS-1', 'PDLS-2', 'PDLS-4', 'PDLS-11', 'PDLS-12'],
                description: 'Students explore their authentic self and draw on their strengths and skills in various contexts to see opportunities for personal growth in challenges that they may experience.',
                lesson: ['Lesson 1: My strengths and skills', 'Lesson 2: Facing challenges and opportunities'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 5 PDHPE Life Skills - Introduction to the resources']
            },
            'Being Party Safe': {
                subtitle: 'Stage 5 | Term 2',
                outcomes: ['PDLS-4.11', 'PDLS-4.13', 'PDLS-4.14', 'PDLS-5.8', 'PDLS-5.9', 'PDLS-5.10'],
                description: 'The "Being Party Safe" program strives to empower students with the knowledge and skills to make safe and responsible choices during social events.',
                lesson: ['Lesson 1: Social events and safety', 'Lesson 2: Making safe choices'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 5 PDHPE Life Skills - Introduction to the resources']
            },
            'Being Work Ready': {
                subtitle: 'Stage 5 | Term 2',
                outcomes: ['PDLS-4.10', 'PDLS-4.11', 'PDLS-4.12', 'PDLS-5.8', 'PDLS-5.9'],
                description: 'The "Being Work Ready" program aims to empower students with the skills, knowledge, and confidence to successfully enter and thrive in the workforce.',
                lesson: ['Lesson 1: Workplace skills', 'Lesson 2: Navigating the workforce'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 5 PDHPE Life Skills - Introduction to the resources']
            },
            'Community Health': {
                subtitle: 'Stage 5 | Term 3',
                outcomes: ['PDLS-7', 'PDLS-8', 'PDLS-9', 'PDLS-10'],
                description: 'Students investigate health services and issues within their local and broader communities. They learn how to access support and contribute to community wellbeing.',
                lesson: ['Lesson 1: Health services in my community', 'Lesson 2: Public health campaigns'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 5 PDHPE Life Skills - Introduction to the resources']
            },
            'Physical Fitness': {
                subtitle: 'Stage 5 | Term 4',
                outcomes: ['PDLS-5', 'PDLS-6'],
                description: 'This unit focuses on developing physical fitness and understanding the benefits of regular exercise. Students explore a variety of physical activities to find what they enjoy.',
                lesson: ['Lesson 1: Benefits of exercise', 'Lesson 2: Exploring different sports'],
                curriculum: ['PDHPE Life Skills Stage 4-5 Syllabus'],
                support: ['Stage 5 PDHPE Life Skills - Introduction to the resources']
            },
            'Relationships & Communication': {
                subtitle: 'Stage 6 | Term 1',
                outcomes: ['PDLS-11', 'PDLS-12', 'PDLS-13'],
                description: 'Students explore personal and group identity, and develop skills to build and maintain healthy relationships with friends, family, and peers.',
                lesson: ['Lesson 1: My social identity', 'Lesson 2: Effective communication skills'],
                curriculum: ['PDHPE Life Skills Stage 6 Syllabus'],
                support: ['Stage 6 PDHPE Life Skills - Introduction to the resources']
            },
            'Safe & Respectful Relationships': {
                subtitle: 'Stage 6 | Term 2',
                outcomes: ['PDLS-14', 'PDLS-15'],
                description: 'Students identify and describe characteristics of safe and respectful relationships, learning how to set boundaries and seek help in difficult situations.',
                lesson: ['Lesson 1: What makes a relationship healthy?', 'Lesson 2: Recognizing red flags'],
                curriculum: ['PDHPE Life Skills Stage 6 Syllabus'],
                support: ['Stage 6 PDHPE Life Skills - Introduction to the resources']
            },
            'Road & Water Safety': {
                subtitle: 'Stage 6 | Term 3',
                outcomes: ['PDLS-16', 'PDLS-17'],
                description: 'This unit focuses on developing knowledge and skills to stay safe in different environments, including road safety for pedestrians and drivers, and water safety.',
                lesson: ['Lesson 1: Road safety for young adults', 'Lesson 2: Water safety tips'],
                curriculum: ['PDHPE Life Skills Stage 6 Syllabus'],
                support: ['Stage 6 PDHPE Life Skills - Introduction to the resources']
            },
            'Personal Identity & Growth': {
                subtitle: 'Stage 6 | Term 4',
                outcomes: ['PDLS-18', 'PDLS-19', 'PDLS-20'],
                description: 'Students reflect on their personal goals, skills, and values. They plan for their future after school, considering areas like work, further education, and independent living.',
                lesson: ['Lesson 1: My personal values', 'Lesson 2: Planning for my future'],
                curriculum: ['PDHPE Life Skills Stage 6 Syllabus'],
                support: ['Stage 6 PDHPE Life Skills - Introduction to the resources']
            }
        };

        // Function to render the list of resources
        function renderResources(container, resources) {
            container.innerHTML = '';
            if (!resources || resources.length === 0) {
                container.innerHTML = '<p class="text-sm text-gray-500">No resources available for this unit.</p>';
                return;
            }
            resources.forEach(resource => {
                const item = document.createElement('div');
                item.className = 'flex justify-between items-center py-2 text-[#D7153A] hover:text-[#002664] transition-colors duration-200';
                item.innerHTML = `
                    <span class="font-medium">${resource}</span>
                    <div class="flex items-center space-x-2">
                        <!-- Placeholder for download icon -->
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m-9 6h6a2 2 0 002-2v-6a2 2 0 00-2-2h-6a2 2 0 00-2 2v6a2 2 0 002 2z"></path></svg>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        // Toggling functionality for collapsible sections
        const toggleSection = (headerId, contentId, arrowId) => {
            const header = document.getElementById(headerId);
            const content = document.getElementById(contentId);
            const arrow = document.getElementById(arrowId);

            header.addEventListener('click', () => {
                content.classList.toggle('hidden');
                arrow.classList.toggle('rotate-90');
                arrow.classList.toggle('rotate-0');
            });
        };

        // Function to render the main schedule table
        function renderSchedule(stage) {
            const data = scopeAndSequenceData[stage];
            if (!data) return;

            // Clear previous schedule
            scheduleBody.innerHTML = '';

            data.terms.forEach((term, termIndex) => {
                const termRow = document.createElement('div');
                termRow.className = 'grid grid-cols-11 text-sm';

                // Add Term header
                const termHeader = document.createElement('div');
                termHeader.className = 'col-span-1 flex items-center justify-center p-4 font-medium bg-[#002664] text-white rotated-text border-r-2 border-b-2 border-white';
                termHeader.textContent = `Term ${termIndex + 1}`;
                termRow.appendChild(termHeader);

                // Add units for the term
                const unitsContainer = document.createElement('div');
                unitsContainer.className = 'col-span-10 grid grid-cols-10';
                let currentWeek = 1;

                term.forEach(unit => {
                    const unitCell = document.createElement('div');
                    let colSpan = unit.weeks;
                    const unitData = unitDetailsData[unit.name] || unitDetailsData['default'];
                    const outcomesText = unitData.outcomes.length > 0 ? `Outcomes: ${unitData.outcomes.join(', ')}` : 'No outcomes listed.';

                    unitCell.className = `col-span-${colSpan} py-4 px-3 bg-white text-gray-800 border-r border-b border-gray-200 table-cell flex-col`;
                    unitCell.innerHTML = `
                        <div class="unit-title font-medium text-lg mb-2 text-[#002664]">${unit.name}</div>
                        <div class="unit-outcomes text-xs font-semibold text-[#D7153A] mb-1">${outcomesText}</div>
                        <div class="unit-description text-sm">${unitData.description}</div>
                    `;
                    unitCell.addEventListener('click', () => showUnitDetails(unit.name));
                    unitsContainer.appendChild(unitCell);
                    currentWeek += unit.weeks;
                });

                // Add empty cells for any gaps before consolidation
                const remainingWeeks = 10 - (currentWeek - 1);
                if (remainingWeeks > 0) {
                    const consolidationCell = document.createElement('div');
                    consolidationCell.className = `col-span-${remainingWeeks} flex flex-col items-center justify-center bg-[#CBDEFD] text-[#002664] border-l border-b border-gray-200`;
                    consolidationCell.innerHTML = `
                        <span class="font-medium">Consolidation</span>
                        <span class="text-xs">
                            <svg class="w-4 h-4 inline-block ml-1 transform rotate-90" fill="currentColor" viewBox="0 0 20 20"><path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" fill-rule="evenodd"></path></svg>
                        </span>
                    `;
                    unitsContainer.appendChild(consolidationCell);
                }

                termRow.appendChild(unitsContainer);
                scheduleBody.appendChild(termRow);
            });
        }
        
        // Function to show unit details on click
        function showUnitDetails(unitName) {
            const data = unitDetailsData[unitName] || unitDetailsData['default'];
            
            unitTitle.textContent = unitName;
            unitSubtitle.textContent = data.subtitle;
            renderResources(outcomesContent, data.outcomes);
            renderResources(lessonContent, data.lesson);
            renderResources(curriculumContent, data.curriculum);
            renderResources(supportContent, data.support);

            unitDetails.classList.remove('hidden');
            unitDetails.scrollIntoView({ behavior: 'smooth' });
        }
        
        // Function to handle printing
        function printSchedule() {
            window.print();
        }

        // Event listeners for stage selection buttons
        stageButtons.forEach(button => {
            button.addEventListener('click', () => {
                stageButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                renderSchedule(button.dataset.stage);
                printButton.classList.remove('hidden');
            });
        });

        // Event listener for the new print button
        printButton.addEventListener('click', printSchedule);

        // Initialize the page with the default schedule (Stage 4)
        document.addEventListener('DOMContentLoaded', () => {
            renderSchedule('4');
            printButton.classList.remove('hidden');
            toggleSection('outcomes-header', 'outcomes-content', 'outcomes-arrow');
            toggleSection('lesson-header', 'lesson-content', 'lesson-arrow');
            toggleSection('curriculum-header', 'curriculum-content', 'curriculum-arrow');
            toggleSection('support-header', 'support-content', 'support-arrow');
        });

    </script>

<script>
(function(){
  if (window.__sepResourcesPatched__) return;
  window.__sepResourcesPatched__ = true;

  const storageKey = "resources-" + (document.title || location.pathname).replace(/\s+/g, "_");

  function qs(id){ return document.getElementById(id); }

  function addResourceToList(name, url){
    const resourceList = qs("resource-list");
    if(!resourceList) return;
    const li = document.createElement("li");
    const a = document.createElement("a");
    a.href = url;
    a.download = name;
    a.textContent = name;
    a.className = "text-[#146CFD] hover:underline";
    li.appendChild(a);
    resourceList.appendChild(li);
  }

  function saveResource(name, url){
    const saved = JSON.parse(localStorage.getItem(storageKey) || "[]");
    saved.push({name, url});
    localStorage.setItem(storageKey, JSON.stringify(saved));
  }

  function loadResources(){
    const saved = JSON.parse(localStorage.getItem(storageKey) || "[]");
    saved.forEach(r => addResourceToList(r.name, r.url));
  }

  document.addEventListener("DOMContentLoaded", function(){
    const outcomesHeader = document.getElementById("outcomes-header");
    const outcomesContent = document.getElementById("outcomes-content");
    const outcomesArrow = document.getElementById("outcomes-arrow");
    if(outcomesHeader && outcomesContent && outcomesArrow){
      outcomesHeader.addEventListener("click", ()=>{
        outcomesContent.classList.toggle("hidden");
        outcomesArrow.classList.toggle("rotate-90");
      });
    }

    const resourcesHeader = document.getElementById("resources-header");
    const resourcesContent = document.getElementById("resources-content");
    const resourcesArrow = document.getElementById("resources-arrow");
    if(resourcesHeader && resourcesContent && resourcesArrow){
      resourcesHeader.addEventListener("click", ()=>{
        resourcesContent.classList.toggle("hidden");
        resourcesArrow.classList.toggle("rotate-90");
      });
    }

    const addBtn = document.getElementById("add-resource");
    const fileInput = document.getElementById("resource-file");
    if(addBtn && fileInput){
      addBtn.addEventListener("click", ()=> fileInput.click());
      fileInput.addEventListener("change", ()=>{
        const file = fileInput.files && fileInput.files[0];
        if(!file) return;
        const url = URL.createObjectURL(file);
        addResourceToList(file.name, url);
        saveResource(file.name, url);
        fileInput.value = "";
      });
    }

    loadResources();
  });
})();
</script>
</body>
</html>
